"use strict";$(document).ready((function(){function i(t){return t*Math.PI/180}var y=function(t,e,s,o){var a=i(s-t),n=i(o-e),l=Math.sin(a/2)*Math.sin(a/2)+Math.cos(i(t))*Math.cos(i(s))*Math.sin(n/2)*Math.sin(n/2),r=2*Math.atan2(Math.sqrt(l),Math.sqrt(1-l))*6378137;return r/=1609.344,Math.round(100*r)/100};function e(t,e){var s,o=new google.maps.Geocoder;"search"===t?s=e:null!==a("postalcode")?s=a("postalcode"):2<document.getElementById("postalCode").value.length&&(s=document.getElementById("postalCode").value),o.geocode({address:s},(function(t,e){e==google.maps.GeocoderStatus.OK?n(t[0].geometry.location.lat(),t[0].geometry.location.lng(),!1):n(37.687176,-97.330055,"default")}))}function a(t){for(var e=t+"=",s=document.cookie.split(";"),o=0;o<s.length;o++){for(var a=s[o];" "==a.charAt(0);)a=a.substring(1,a.length);if(0==a.indexOf(e))return a.substring(e.length,a.length)}return null}function n(t,e,s){for(var n=new google.maps.Map(document.getElementById("store_map"),{center:{lat:t,lng:e},zoom:10}),o=0;o<store_list.length;o++)store_list[o].distance=y(store_list[o].lat,store_list[o].lng,t,e),store_list[o].nameClass=store_list[o].name.replace(/\s+/g,"-").toLowerCase();var a,l,r=store_list.slice();a="distance",60<(r=r.sort((function(t,e){var s=t[a],o=e[a];return s<o?-1:o<s?1:0})))[0].distance&&(alert("No stores within 60 miles."),n.setZoom(7)),l="default"===s?(n.setZoom(4),0):10;var i=document.getElementById("store_list"),c="";i.innerHTML="";for(var d,p,m,g,_,u,h=[],f=new google.maps.InfoWindow,o=0;o<l;o++)""!==r[o].type&&"CDC"!==r[o].type&&"RDC"!==r[o].type||(d=r[o].address+" "+r[o].address2+" "+r[o].city+", "+r[o].state+" "+r[o].postal,p=0<r[o].address2.length?r[o].address2+", <br>":"<br>",g=r[o].comingSoon?(m='<br> <span style="font-weight:400; color: #c9001c; font-style:italic">Coming Soon</span>','style="display:none"'):m="",c+="<div class='store_list_entry "+r[o].nameClass+"' data-order='"+o+"' data-nameClass='"+r[o].nameClass+"'><p class='loc-name'>"+r[o].name+m+"</p><p class='loc-addr'>"+r[o].address+", "+p+r[o].city+", "+r[o].state+" "+r[o].postal+"</p><p class='loc-phone'><a href='tel:"+r[o].phone+"'>"+r[o].phone+"</a></p><p "+g+" class='loc-web'><a href='/stores/store-locations"+r[o].web+"' class='store_list_entry_url_anchor' target='_blank'>Visit Store Page</a></p><p class='loc-dist'>"+r[o].distance+" miles away</p><p class='loc-directions'><a href='https://maps.google.com/maps?daddr="+d+"' target='_blank'>Directions</a></p></div>",_="<div class='store_list_infowindow "+r[o].nameClass+"' data-order='"+o+"' data-nameClass='"+r[o].nameClass+"'><p class='store_list_entry_name'>"+r[o].name+"</p><p class='store_list_entry_address'>"+r[o].address+"</p><p class='store_list_entry_phone'><a href='tel:"+r[o].phone+"'>"+r[o].phone+"</a></p><p class='store_list_entry_distance'>"+r[o].distance+" miles away</p><p "+g+" class='store_list_entry_url'><a href='/stores/store-locations"+r[o].web+"' class='store_list_entry_url_anchor' target='_blank'>Visit Store Page</a></p></div>",u=new google.maps.Marker({position:{lat:r[o].lat,lng:r[o].lng},map:n,title:r[o].nameClass,content:_,icon:"https://images.lennoxpros.com/is/image/LennoxIntl/lennox-stores-locator-app-pin-v1?scl=1&fmt=png-alpha",customID:o}),h.push(u),v(u));function v(o){o.addListener("click",(function(){var t,e="."+o.title,s=parseInt(o.customID);$(e).hasClass("active")||($(".store_list_entry").removeClass("active"),$(e).addClass("active"),t=$(".store_list_entry").outerHeight()*s,$("#store_list").animate({scrollTop:t},400),f.setContent(this.content),f.open(this.getMap(),this))}))}i.innerHTML+=c,$("#store_list").off("click",".store_list_entry").on("click",".store_list_entry",(function(){var t=parseInt($(this).attr("data-order")),e="."+$(this).attr("data-nameClass"),s=h[t],o=s.getPosition().lat(),a=s.getPosition().lng();$(e).hasClass("active")||(f.close(),f.setContent(s.content),f.open(s.getMap(),s),$(".store_list_entry").removeClass("active"),$(e).addClass("active"),n.panTo({lat:o,lng:a}))})),$("#store_map,#store_list").addClass("active")}var t={maximumAge:100,timeout:3e3};function s(){e("search",document.getElementById("store_search_input").value)}$.getScript("https://images.lennoxpros.com/is/content/LennoxIntl/web-dev/other/js/lennox-store-list-json-2021-min.js",(function(){navigator.geolocation?navigator.geolocation.getCurrentPosition((function(t){n(t.coords.latitude,t.coords.longitude,!1)}),(function(t){t.code==t.PERMISSION_DENIED||t.code==t.POSITION_UNAVAILABLE||t.code==t.TIMEOUT||(t.code,t.UNKNOWN_ERROR),e()}),t):e()})),document.getElementById("store_search_btn").addEventListener("click",(function(){s()})),document.getElementById("store_search_input").addEventListener("keypress",(function(t){13===(t.which||t.keyCode)&&s()})),$(".load-complete-store-list").click((function(t){t.preventDefault(),$("html, body").animate({scrollTop:$(".full-store-list").offset().top-30},1e3)}))}));